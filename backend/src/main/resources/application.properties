# Default Profile Configuration
spring.profiles.active=dev

# Server Port (fallback if profile-specific port not picked up)
server.port=8080

# Health Check Endpoint
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=always

# Application Name
spring.application.name=Avira Udupu-backend

# Path Matching Strategy - Use legacy Ant matcher for compatibility
spring.mvc.pathmatch.matching-strategy=ant_path_matcher

# ============================================================================
# CRITICAL: Prevent infinite forwarding loops and OOM errors
# ============================================================================
spring.mvc.dispatch-options-request=false
server.error.include-stacktrace=never
server.error.include-message=always

# Disable default resource serving that causes loops
spring.resources.add-mappings=false

# Strict resource location checks to prevent path traversal
server.servlet.session.tracking-modes=cookie

# Request forwarding limit - prevents dispatcher loops
server.tomcat.max-redirects=0

# ============================================================================
# JVM Memory Settings (also set via MAVEN_OPTS in startup script)
# ============================================================================
# These are backup configurations if MAVEN_OPTS is not set
# Primary memory configuration is in run-dev.cmd

# ============================================================================
# Email Configuration (Gmail SMTP)
# ============================================================================
spring.mail.host=smtp.gmail.com
# Use SSL (port 465) to avoid some network blocks on STARTTLS/587
spring.mail.port=465
spring.mail.username=keerthudarshu06@gmail.com
spring.mail.password=lyvi rvng pfah vglg
spring.mail.protocol=smtp
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.starttls.enable=false
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.writetimeout=10000
